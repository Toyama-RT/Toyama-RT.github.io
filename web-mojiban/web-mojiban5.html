<!DOCTYPE html>
<html lang="ja"><head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-82832782-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-82832782-3');
</script>

  <meta content="text/html; charset=utf-8" http-equiv="content-type">

  
  <script type="text/javascript" src="../sh/scripts/shCore.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushXml.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushPlain.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushJScript.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushVb.js"></script>
  
  <link type="text/css" rel="stylesheet" href="../sh/styles/shCoreDefault.css">

  
  <script type="text/javascript">SyntaxHighlighter.all();</script>
  <title>Web 文字盤5｜富山県リハ病院こども支援センター</title>
  
  <style type="text/css">
<!--
      
p	{
      font-size: 20px;
      line-height : 1.75 ;
      margin: 15px 100px 15px 100px;
	}
h1 {
    text-align: center;
    }
h2 {
    text-align: left;
      margin-left: 100px;
    }
h3 {
    text-align: left;
      margin-left: 100px;
    }
h4 {
    text-align: left;
      margin-left: 120px;
    }
pre {
    font-size: 20px;
    margin: 5px 100px 15px 100px;
    }
address{
	margin:5px 100px 15px 100px;
}      
blockquote {
    position: relative;
      font-size: 20px;
      line-height : 1.5 ;
    padding: 5px 150px 8px 100px;
    box-sizing: border-box;
    font-style: italic;
}
ol {
}
ul {
}
li {
  margin-top: 5px; /* 上余白指定 */
  margin-bottom: 5px; /* 下余白指定 */
  margin-left: 100px; /* 左余白指定*/
  margin-right: 100px; /* 右余白指定 */
  font-size: 20px; /*リストのフォントの大きさ*/
}
button{
  margin-bottom:1rem;
  width:150px;
  height:100px;
}

span.samples {font-size: small; }
.syntaxhighlighter {
  width: 80% !important;
  margin: 1em 100px 1em 100px !important;
  position: relative !important;
  overflow: auto !important;
  font-size: 1.3em !important;
}

    #text1 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn1 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice1 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;

    }
    #text2 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn2 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice2 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;

    }
    #text3 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn3 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice3 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;
    }


-->
  </style>

</head><body>
<p align="center"><font size="5"><font size="5"><font size="3"><font color="#ff0000">かならずお読みください</font>→<a href="../cyuui.html" target="_self"><img alt="注意事項" src="../cyuuijikou.gif" border="0" height="29" width="78"></a></font></font></font></p>

<h1>Web 文字盤　５</h1>
<h1>文章読み上げ機能を追加しました</h1>

<div style="text-align: center;"><img alt="Web文字盤" src="img/webmojiban.png" border="2"></div>

<p align="center">
<a target="_blank" href=" https://youtu.be/sSRN5c_RpOc">youtubeの動画はこちら　1分33秒　音が出ます<br>firefoxが日本語発話に対応しました<br>文章を切り替えながら次々と読み上げています</a>
</p>

<h2>０　はじめに</h2>
<p>
2018年2月から3月にかけてエンチャント文字盤でWebSpeechAPIを使った日本語の読み上げに取り組みました。（詳細は文末の参考URLを参照してください）しかし当時は情報が混乱し思い通りに使いこなすところまで達することができませんでした。また当時は日本語発声に先行していたgoogleのchromeを使用すれば何とか日本語も発話できたのですが、それ以外のブラウザが対応が遅れていてchromeのインストールができないと使えませんでした。
</p><p>
このたび、MozillaのFirefoxが正式に対応し、またmicrosoftのEdgeもすこし違いがありますが発話できるようになりました。そこでWeb文字盤の読み上げ機能付きを公開することになりました。
</p>
<h2>１　読み上げ機能</h2>
<p>
これまでのWeb文字盤では、AquesTalkを組み込んだフリーの合成音声作成ソフトSoftalkを使って作成した音声ファイルを再生しています。このためあらかじめ用意したことばしか発声できません。これに対して今回はブラウザに組み込まれたWebSpeechAPIを使いその場で音声を合成して発声しています。これによってその時点でテキストボックスに表示されている任意の文字列を発声できるようになりました。またボタン操作時の音声もすべてこの方式に変更しました。おかげで数字もきれいに読み上げることができます。
</p><p>
読み上げ以外の機能はこれまで公開したWeb文字盤と全く同じです。作成した文書がテキストボックスに表示されているときに左上角の顔マークの発話ボタンをおすと読み上げを開始します。発話の様子はこのページトップの動画をご覧ください。
</p>
<h2>２　対応　OSとブラウザ</h2>
<p>
日本語読み上げを使うにはブラウザの最新版を準備してください。特にFirefoxは今年10月に対応したようです。それ以前のバージョンでは発声しません。
</p>
<h3>Windows10</h3>
<p>
microsoftのEdge(44.17763.771.0で動作確認)ではWindowsの標準合成音声、"MS-ayumi"が発声します。ややゆっくりとした落ち着いた女性の声です。
</p><p>
Googleのchrome(78.0.3904.97で動作確認)ではGoogleの合成音声、"Google日本語"が発声します。やや早口で若々しい女性の声です。
</p><p>
MozillaのFirefox(77.0.1で動作確認)はver69では全く日本語を発声できませんでしたが、対応しました。声はchromeとおなじ、"Google日本語"です。
</p>
<h3>ubuntu18.04</h3>
<p>
Googleのchrome(78.0.3904.97で動作確認)ではGoogleの合成音声、"Google日本語"が発声します。やや早口で若々しい女性の声です。
</p><p>
Googleのchromium(77.0.3865.90)では日本語発声はできませんでした。
</p><p>
MozillaのFirefox(77.0.1で動作確認)では男性外国人のつたない日本語発声ができます。まだ未完成のようです。ただ以前は全く発話できませんでした。
</p>
<h3>Android　4.2.1</h3>
<p>
GoogleのchromeではGoogleの合成音声、"Google日本語"が発声します。やや早口で若々しい女性の声です。
</p><p>
MozillaのFirefoxでは一部の声が出ますがあとはほとんど日本語を発声できません。
</p>
<h2>３　文書読み上げ機能付きWeb 文字盤</h2>
<p>
お使いになるモニターに合わせて下記の３種類から選んでください。お気に入り（ブックマーク）に登録すると次回から起動しすくなります。 
</p><p>
<a href="./hcjlc1a/hcj.html" target="_blank">50音文字盤　四種類文字盤切り替え　10種類の文書切り替え、文書保存機能付き　文書読み上げ機能付き　4:3モニター用</a>
</p><p>
<a href="./hcjlc1aw/hcj.html" target="_blank">50音文字盤　四種類文字盤切り替え　10種類の文書切り替え、文書保存機能付き　文書読み上げ機能付き　16:9モニター用</a>
</p><p>
<a href="./hcjlc1aww/hcj.html" target="_blank">50音文字盤　四種類文字盤切り替え　10種類の文書切り替え、文書保存機能付き　文書読み上げ機能付き　さらにワイド用</a>
</p>
<h2>４　おわりに</h2>
<p>
Android版EVA Facial Mouse に対応する目的で作り始めたWeb文字盤ですが、半年間でほぼ目的を達成することができました。この間いろいろと回り道をしましたがいろいろ勉強できました。まだオフラインWebアプリ化が残っていますのでこれからはそちらに力を入れていこうと思います。
</p><p>
その先は、より多くの方々に取り組んでもらえるように、エンチャント文字盤やWeb文字盤のプログラムの作り方やその応用発展について手引きつくりなど計画しています。

</p>
<h2>関連する話題</h2>

<ul>
  <li><a href="./web-mojiban1.html" target="_self">Web　文字盤　１　Android の EVA Facial Mouse でも使えます</a>
</li>
  <li><a href="./web-mojiban2.html" target="_self">Web　文字盤　２　ワイドモニターでの見やすさを改善しました</a>
</li>
  <li><a href="./web-mojiban3.html" target="_self">Web　文字盤　３　あいさつ文字盤とからだ文字盤を追加しました</a>
</li>
  <li><a href="./web-mojiban4.html" target="_self">Web　文字盤　４　オフラインWebアプリへの道</a>
</li>
  <li><a href="./web-mojiban6.html" target="_self">Web　文字盤　６　読み上げ機能付きWeb文字盤にオフラインWebアプリ機能をつけました</a>
</li>
  <li><a href="./web-mojiban7.html" target="_self">Web　文字盤　７　オフラインWebアプリ　通常の使い方とインストールアンインストールの方法</a>
</li>

</ul>

<h2>参考URL</h2>
<p>エンチャント文字盤の音と声　関係
<ul>
  <li>エンチャント文字盤の音と声　第一回　音の役割と出す方法<br>
<a target="_blank" href="http://www.toyama-reha.or.jp/techno/engineering/enchant/enchant6.html">http://www.toyama-reha.or.jp/techno/engineering/enchant/enchant6.html</a></li>
  <li>エンチャント文字盤の音と声　第二回　声の役割と出す方法<br>
<a target="_blank" href="http://www.toyama-reha.or.jp/techno/engineering/enchant/enchant7.html">http://www.toyama-reha.or.jp/techno/engineering/enchant/enchant7.html</a></li>
  <li>エンチャント文字盤の音と声　第三回　WebSpeechAPIをつかうけど Can I use?<br>
<a target="_blank" href="http://www.toyama-reha.or.jp/techno/engineering/enchant/enchant8.html">http://www.toyama-reha.or.jp/techno/engineering/enchant/enchant8.html</a></li>

</ul>

<p>Web Speech API関係
<ul>
  <li>Can I use... Support tables for HTML5, CSS3, etc<br>
<a target="_blank" href="https://caniuse.com/#search=Speech%20Synthesis%20API">https://caniuse.com/#search=Speech%20Synthesis%20API</a></li>

  <li>Web Speech APIの実装 - Speech Synthesis API | CodeGrid<br>
<a target="_blank" href="https://app.codegrid.net/entry/2016-web-speech-api-1">https://app.codegrid.net/entry/2016-web-speech-api-1</a></li>

</ul>
<hr style="width: 60%; height: 5%; color: black;">
<p><span class="samples">2019/11/8　公開</span></p>

<a href="../index.html" target="_self">
<p align="center">研究企画課リハ工学科にもどる</a>　←もくじはこちらです</p>

</body></html>
