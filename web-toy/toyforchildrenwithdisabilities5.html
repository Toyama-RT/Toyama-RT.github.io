<!DOCTYPE html>
<html lang="ja"><head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-82832782-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-82832782-3');
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z7DXKP3EBK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z7DXKP3EBK');
</script>

  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  
  <script type="text/javascript" src="../sh/scripts/shCore.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushXml.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushPlain.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushJScript.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushVb.js"></script>
  
  <link type="text/css" rel="stylesheet" href="../sh/styles/shCoreDefault.css">
  
  <script type="text/javascript">SyntaxHighlighter.all();</script>
  <title>Toy5｜富山県リハ病院こども支援センター</title>
  
  <style type="text/css">
<!--
      
p	{
      font-size: 20px;
      line-height : 1.75 ;
      margin: 15px 100px 15px 100px;
	}
h1 {
    text-align: center;
    }
h2 {
    text-align: left;
      margin-left: 100px;
    }
h3 {
    text-align: left;
      margin-left: 100px;
    }
h4 {
    text-align: left;
      margin-left: 120px;
    }
pre {
    font-size: 20px;
    margin: 5px 100px 15px 100px;
    }
address{
	margin:5px 100px 15px 100px;
}      
blockquote {
    position: relative;
      font-size: 20px;
      line-height : 1.5 ;
    padding: 5px 150px 8px 100px;
    box-sizing: border-box;
    font-style: italic;
}
ol {
}
ul {
}
li {
  margin-top: 5px; /* 上余白指定 */
  margin-bottom: 5px; /* 下余白指定 */
  margin-left: 100px; /* 左余白指定*/
  margin-right: 100px; /* 右余白指定 */
  font-size: 20px; /*リストのフォントの大きさ*/
}
button{
  margin-bottom:1rem;
  width:150px;
  height:100px;
}

span.samples {font-size: small; }
.syntaxhighlighter {
  width: 80% !important;
  margin: 1em 100px 1em 100px !important;
  position: relative !important;
  overflow: auto !important;
  font-size: 1.3em !important;
}

    #text1 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn1 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice1 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;

    }
    #text2 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn2 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice2 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;

    }
    #text3 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn3 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice3 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;
    }


-->
  </style>

</head><body>
<p align="center"><font size="5"><font size="5"><font size="3"><font color="#ff0000">かならずお読みください</font>→<a href="../cyuui.html" target="_self"><img alt="注意事項" src="../cyuuijikou.gif" border="0" height="29" width="78"></a></font></font></font></p>

<h1>障害をもつこどもたちのためのおもちゃ　５</h1>
<h1>ボールなげ　その２</h1>

<div style="text-align: center;"><img alt="ぼーるなげ　その２" src="img/webball3.png"></div>

<h2>０　はじめに</h2>
<p>
今回もまたお身体に不自由を持つこどもたちのためのおもちゃを紹介します。前回は、『わからないことや初めてのことも多いので』と書きましたが案の定、ここ数週間は大物解決のために勉強して、試作品を作り、実験をしたりしていました。（ほかの仕事の合間にですが）ようやくここに来て先が見えてきたので、おもちゃ作りを再開したところです。
</p><p>
さて考えてみると、おもちゃに限らず興味や関心をひく物を作るにはいろいろな要素が必要になります。
</p><p>
まず外見、つまり見た目、色や形など目に見えるもののおもしろさです。さらにここには動きのおもしろさも含まれると思います。
次に、音楽や効果音など耳で聴き感じるおもしろさです。これら見えるおもしろさと聴こえるおもしろさが相互協調して表現されると効果的なようです。
</p><p>
そしてストーリーです。視覚や聴覚でとらえたものに何かの変化や流れや繰り返しなど規則性や意外性をみつけ頭の中で色々思い考え、喜怒哀楽（？）の感情がゆさゆさと揺さぶられると大変よろしいわけです。
</p><p>
このように考えると、手品曲芸などパフォーマンスや『ビー玉ビー助大冒険』やセサミストリートやゲームやおもちゃなどにはどれも共通してこれらの要素が見えてきます。
</p><p>
ということは、スマホやタブレットでおもちゃを作ろうとする場合に、
まずとりかかるべきは、
視覚刺激や聴覚刺激を絵を描いたり楽器を演奏したりするように自由自在につくれるようになること。
そしてそれらを組み合わせてお話をつくり
その中に遊んでいる人も何らかの形で参加できるようにする
という技能がおもちゃ作りの基礎として大切なことがわかります。
まるで絵本を作る前に絵を描く練習、音楽をやる前に歌や楽器の練習が必要なのとよく似ています。
</p><p>
これまで少しづつ取り組んできましたがようやく今では、
画面表示は、表示、消去、移動、アニメーションなどいろいろできるようになってきました。
ストーリーについては、タッチしたり、衝突したりすると何かが起きるとか、ボールが跳ねるように、赤丸図形を動かしたり、そのボールを投げたり転がしたりできるようになりました。
そして音ですが、実はこれがなかなか手ごわくていろいろ規制やハードルがありまして、それらを避けながら、改善しているところです。

だんだんできることが増えてきますがやればやるほど奥も深くて、ますますおもしろさがましてきました。
</p><p>
木のおもちゃやブリキのおもちゃ、おもちゃにも色々ありますが、考えてみればこのような工夫や苦労はどれにもあるように思います。それはさておき、、、

</p>
<h2>１　今回の試作品　ボールなげ　その２</h2>
<p>
前回の大太鼓（バスドラム）、小太鼓（スネアドラム）にシンバルを追加しました。
いちいち説明するよりも、実際に動かしてもらったほうが時間の節約になりますので、お試しください。
</p><p>
<a href="https://toyama-rt.github.io/web-toy/t08/balla2.html" target="_blank">ボールなげ　その2　やや重力あり</a>
</p><p>
楽器が３種類になったので、演奏にいくらか厚みが加わりました。特にボールを強く早く投げつけるとなかなか賑やかになります。
</p><p>
例によってこのアプリを使っても特にこれといったご利益はありません。ただ楽しんで面白がって、指を動かしてもらえれば十分と思います。

</p>
<h2>２　おわりに</h2>
<p>
ボールが床に落ちてバウンドして床にぶつかるたびにドラムがなります。そしてだんだん音の間隔が短くなってきます。
</p><p>
WebToyのプログラムではJavaScriptを使いで効果音を出すのに今の所次の２種類の方法を使っています。
</p><p>
１番目の方法

<pre class="brush: js;">

      audioElem = new Audio();
      audioElem.src = "./bat1.mp3";
      audioElem.play();

</pre>
</p><p>
２番目の方法
<pre class="brush: js;">

     // web audio API によるサウンド出力
        const audioctx = new AudioContext();
        const sound = await LoadSample(audioctx, "./bat1.mp3");
        const src = new AudioBufferSourceNode(audioctx, {buffer:sound});
        src.connect(audioctx.destination);
        src.start();

      function LoadSample(actx, url) {
        return new Promise((resolv)=>{
            fetch(url).then((response)=>{
                return response.arrayBuffer();
            }).then((arraybuf)=>{
                return actx.decodeAudioData(arraybuf);
            }).then((buf)=>{
                resolv(buf);
            })
        });

</pre>

</p><p>
１番目はシンプルですが、２番目はWebAudioAPIをつかっています。WebAudioAPIは超強力でサウンドに関して多くの機能を備えています。これを使いこなせるようになると、自由自在に音を操れるようになるのも夢ではありません。録音型VOCAにはこれがいいかもしれません。Web文字盤では効果音をこの方法で出しています。ただおもちゃのように短い間隔で連続で音をだそうとすると、タブレットやスマホでは荷が重いようです。ボールを床でバウンドさせて時間間隔が短くなってくると音飛びが出ます。まるで私の心電図みたいです。
</p><p>
今回のようにサウンドファイルを再生するだけなら、シンプルで負荷も少ない１番目の方法がよいようです。今回の試作品でもこの方法を使っていますので、思い切りガンガン動かしてもしっかり音がついてきますので、まあ合格だと思っています。
</p><p>
オフラインでサウンドファイルが再生できない問題が出た際も、このような再生方法の違いが原因ではないかとひととおり探ってみましたが結局違うことがわかりました。
ずいぶん回り道もしましたが、おかげでこのあたりを勉強することができました。まあ収穫でしょう。
このように脇道のことを知っておくとコースに障害物が見つかっても避けて行けます。しかし一本道しか知らないと、苦労することになります。
</p><p>
これがコスパ重視の怖いところです、運が悪いと遭難したりします。ご用心ご用心。

</p>

<h2>参考URL</h2>
<ul>
  <li>Web Audio API の使用 - Web API - MDN Web Docs <br>
<a target="_blank" href="https://developer.mozilla.org/ja/docs/Web/API/Web_Audio_API/Using_Web_Audio_API">https://developer.mozilla.org/ja/docs/Web/API/Web_Audio_API/Using_Web_Audio_API</a></li>

</ul>


<hr style="width: 60%; height: 5%; color: black;">
<p><span class="samples">2021/10/29　公開</span></p>

<a href="../index.html" target="_self">
<p align="center">研究企画課リハ工学科にもどる</a>　←もくじはこちらです</p>

</body></html>
