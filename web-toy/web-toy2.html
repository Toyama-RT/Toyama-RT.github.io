<!DOCTYPE html>
<html lang="ja"><head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-82832782-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-82832782-3');
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z7DXKP3EBK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z7DXKP3EBK');
</script>

  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  
  <script type="text/javascript" src="../sh/scripts/shCore.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushXml.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushPlain.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushJScript.js"></script>
  
  <script type="text/javascript" src="../sh/scripts/shBrushVb.js"></script>
  
  <link type="text/css" rel="stylesheet" href="../sh/styles/shCoreDefault.css">
  
  <script type="text/javascript">SyntaxHighlighter.all();</script>
  <title>WebToy2｜富山県リハ病院こども支援センター</title>
  
  <style type="text/css">
<!--
      
p	{
      font-size: 20px;
      line-height : 1.75 ;
      margin: 15px 100px 15px 100px;
	}
h1 {
    text-align: center;
    }
h2 {
    text-align: left;
      margin-left: 100px;
    }
h3 {
    text-align: left;
      margin-left: 100px;
    }
h4 {
    text-align: left;
      margin-left: 120px;
    }
pre {
    font-size: 20px;
    margin: 5px 100px 15px 100px;
    }
address{
	margin:5px 100px 15px 100px;
}      
blockquote {
    position: relative;
      font-size: 20px;
      line-height : 1.5 ;
    padding: 5px 150px 8px 100px;
    box-sizing: border-box;
    font-style: italic;
}
ol {
}
ul {
}
li {
  margin-top: 5px; /* 上余白指定 */
  margin-bottom: 5px; /* 下余白指定 */
  margin-left: 100px; /* 左余白指定*/
  margin-right: 100px; /* 右余白指定 */
  font-size: 20px; /*リストのフォントの大きさ*/
}
button{
  margin-bottom:1rem;
  width:150px;
  height:100px;
}

span.samples {font-size: small; }
.syntaxhighlighter {
  width: 80% !important;
  margin: 1em 100px 1em 100px !important;
  position: relative !important;
  overflow: auto !important;
  font-size: 1.3em !important;
}

    #text1 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn1 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice1 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;

    }
    #text2 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn2 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice2 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;

    }
    #text3 {
        width: 50%;
        height: 3em;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 3px;
        margin-bottom: 10px;
        font-size: 1.4em;
        font-weight: 700;
    }
    #btn3 {
        background: -webkit-linear-gradient(top,#008dfd 30%,#0370ea 100%);
        color: white;
        text-shadow: 1px 1px 1px #076bd2;
        border-radius: 3px;
        border: 1px solid #076bd2;
        padding: 2px 25px;
        font-weight: 700;
        font-size: 20px;
    }
    #selectVoice3 {
        width: 200px;
        font-weight: 700;
        font-size: 20px;
    }


-->
  </style>

</head><body>
<p align="center"><font size="5"><font size="5"><font size="3"><font color="#ff0000">かならずお読みください</font>→<a href="../cyuui.html" target="_self"><img alt="注意事項" src="../cyuuijikou.gif" border="0" height="29" width="78"></a></font></font></font></p>

<h1>Web Toy ２</h1>
<h1>その次　どうするか</h1>

<div style="text-align: center;"><img alt="Webのおもちゃ" src="img/webtoy2a.png"><p>ナイスショット</p></div>

<h2>０　はじめに</h2>
<p>
むかしむかしまだ私も若くこの仕事を始めて間もない頃のことです。当時の東京都補装具研究所の市川洌さんには大変お世話になり、いろいろと教えていただきました。そのひとつがこれでした。
</p><p>
「こどもさんを相手にするときはネタをたくさん準備しておかないといけないよ。なにしろすぐに飽きるし、そうなるとやる気もみるみるなくなりついには機嫌まで悪くなる。こうなったらもう手がつけられなくなるよ。もしかしたら散々な目に遭うかもしれないよ。だから気を付けてね」
</p><p>
このアドバイスにもかかわらず、その後このような散々な目に何度か遭遇しました。実にお恥ずかしい話です。
</p><p>
そのかいあって、いまではいろいろなことを考えながらものを作るようになりました。今回は前回ご紹介したWebToy1について説明し、続いてその次にできることについてお話したいと思います。
</p>
<h2>１　WebToy1</h2>
<p>
前回紹介したwbToy１は、次のようなファイルの集まりです。現在皆さんに提供しているものはこれにPWAオフラインWebアプリ機能のための変更が加わりますが、ここでは理解しやすくするためにその部分は省略しました。しかしオンラインWebアプリとして使うにはこれだけでできます。
</p><p>
├─js<br>
│  ├─lib<br>
│  │  ├─plugins<br>
│  │  │  ├─nineleep.enchant.js<br>
│  │  │  └─ui.enchent.js<br>
│  │  ├──box2d.enchant.js<br>
│  │  ├──Box2dWeb-2.1.a.3.js<br>
│  │  └──enchant.js<br>
│  └─main.js<br>
├─snd<br>
│  └─jump.mp3<br>
└─index.html
</p><p>
ここで、jsフォルダ内のlibフォルダ内のファイルは、enchant.jsのサイト

<a target="_blank" href="https://github.com/wise9/enchant.js/">https://github.com/wise9/enchant.js/</a>

からダウンロードできます。当方では特に手を入れずオリジナルのままで使用しています。またsndフォルダ内のjump.mp3はクリックした際の効果音です。これも参考にしたサンプルから頂いたものです。
</p><p>
つまりWebToy1のために作製したのは、index.htmlとmain.jsだけです。
</p><p>
まず、index.htmlをみてみましょう。
</p><p>

<pre class="brush:html;">

&lt;!DOCTYPE html>
&lt;html>
    &lt;head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes"> 
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <title>Web-Toy-1</title>
        <script type="text/javascript" src="./js/lib/enchant.js"></script>
        <script type="text/javascript" src="./js/lib/Box2dWeb-2.1.a.3.js"></script>
        <script type="text/javascript" src="./js/lib/box2d.enchant.js"></script>
        <script type="text/javascript" src="./js/main.js"></script>
        <style type="text/css">
            body {
                margin: 0;
            }
        </style>
    &lt;/head>
    &lt;body>
    &lt;/body>
&lt;/html>
</pre>
</p><p>
Webページを開くときに最初に読み込むのが、index.htmlです。中を見るとheadタグ以外ほとんどありません。まずutf-8への対応に続きブラウザへの対応、タイトルの指定のあと、enchant関連のライブラリを順次読み込んでいきます。そして最後に次に説明するmain.jsを読み込みます。これらはmain.jsを動かすための役割をしています。ですから改造するときでも、書き換えるのはtitleタグだけでそのほかは特にそのままで変更する必要はないでしょう。
</p><p>
続いてmain.jsは次のようになっています。ここに動きのすべてが書いてあります。
<pre class="brush:js;">
enchant();
window.onload = function() {
        var game = new Core(320, 320);
        game.fps = 24;
        game.preload('./snd/jump.mp3');
        game.onload = function() {
                //物理エンジンの宣言
                var world = new PhysicsWorld(0, 9.8);//重力加速度　下方向に9.8m/s2

                //床の作成
                var floor = new PhyBoxSprite(320, 16, enchant.box2d.STATIC_SPRITE, 0, 1.0, 0, false);//密度0摩擦1反発0
                floor.backgroundColor = "#aaa";
                floor.position = {
                        x: 160,
                        y: 312
                }
                game.rootScene.addChild(floor);

                //右壁の作成
                var rwall = new PhyBoxSprite(16, 320, enchant.box2d.STATIC_SPRITE, 0, 1.0, 0, false);
                rwall.backgroundColor = "#aaa";
                rwall.position = {
                        x: 312,
                        y: 160
                }
                game.rootScene.addChild(rwall);

                //左壁の作成
                var lwall = new PhyBoxSprite(16, 320, enchant.box2d.STATIC_SPRITE, 0, 1.0, 0, false);
                lwall.backgroundColor = "#aaa";
                lwall.position = {
                        x: 8,
                        y: 160
                }
                game.rootScene.addChild(lwall);

                //天井の作成
                var top = new PhyBoxSprite(320, 16, enchant.box2d.STATIC_SPRITE, 0, 1.0, 0, false);
                top.backgroundColor = "#aaa";
                top.position = {
                        x: 160,
                        y: 8
                }
                game.rootScene.addChild(top);

                //点の作成
                var dot = new PhyBoxSprite(2, 2, enchant.box2d.STATIC_SPRITE, 0, 1.0, 0, false);
                dot.backgroundColor = "#aaa";
                dot.position = {
                        x: 160,
                        y: 160
                }
                game.rootScene.addChild(dot);

                //四角形の作成
                var count1 = 0;
                var addBox = function(){
                var box = new PhyBoxSprite(32, 32, enchant.box2d.DYNAMIC_SPRITE, 1.0, 0.5, 0.5, true);//密度1摩擦0.5反発0.3
                box.backgroundColor = "red";
                box.position = {
                        x: 80,
                        y: 50
                }
                game.rootScene.addChild(box);

                game.rootScene.addEventListener(Event.TOUCH_START, function(e) {
		  game.assets['./snd/jump.mp3'].clone().play(); //クリックすると音

                  if (count1 == 0){
                    Impx = 50;
                  } else if (count1 == 1){
                    Impx = -50;
                  } else {
                   Impx = 0;
                   count1 = -1;
                  }
                   Impy = -50; 
                 box.applyImpulse(new b2Vec2(Impx, Impy));
                 count1++;

                });
                }
                  addBox();

                //物理エンジン処理
                game.rootScene.onenterframe = function() {
                        world.step(game.fps);
                }
        }

        game.start();
}
</pre>

</p><p>
1行目は、enchat.jsを使用する宣言です。<br>
2行目以下のすべてが、起動した際の処理を示します。<br>
3行目は、320ドット四方の空間（名前はgameです）の宣言です。<br>
4行目は、フレームレート（動画のコマ数）毎秒24コマの指定です。<br>
5行目は、効果音ファイルの事前読み込み。<br>
6行目以下が読み込み終了時の処理です。つまり上の行のファイル読み込み終了を待ちます<br>
8行目は物理エンジンの宣言です。この例では、x方向にゼロ、ｙプラス方向に9.8m/s2の加速度（地球の重力加速度ですね）を設定しています。ちなみに座標系は原点が左上角で右がｘプラス、下がｙプラスです。<br>
11行目で床を作ります。320ドットｘ16ドットの静的（STATIC）画像、密度０、摩擦1.0、反発0、色はカラーコードでaaa、中心座標が（160,312）で18行目で画面に表示します<br>
同じ要領で、左右の壁、天井、中央の点、を作ります。これらは静的ですので同じ場所にとどまります。<br>
55-64行で赤い正方形を作る関数を記載しています。ただしここで作っているのは、動的な（DYNAMIC）画像です。これは動的ですので、画面に出現後、重力によって落下します。<br>
66-81行でクリックした際に、効果音を鳴らし、赤い正方形に三種類の力を順次加えて飛び跳ねさせています。<br>
83行で赤い正方形をひとつ発生させています。この行を3つ重ねるとホントに3つ出て来ます。<br>
86行で物理エンジン処理を動作させています。<br>
91行で、全体を動かし始めています。
</p><p>
このように、赤い正方形が落下したり、飛び跳ねたり跳ね返ったり回転したりはいちいち書き込んでいません、一切は物理エンジンが取り仕切っています。このため100行以下でこのように複雑な動きを作ることができます。
</p><p>
原理も理屈もわからない魔法のようなものでは創意工夫の余地がありません。また『魔法使いの弟子』のような騒動も起きます。しかしこのように仕組みが理解できるといろいろな工夫ができるようになります。次はそのような事例について紹介します。
</p>
<h2>２　飽きちゃった場合には</h2>
<p>
多分一番多いのはこのような場合つまり飽きちゃったです。
</p><p>
飽きること自体は学習の結果ですから特に悪いことでもありません。しかし飽きたまま過ごして時間や資源を無駄遣いすべきではありませんので少し手を加えてみましょう。
</p><p>
たとえばバスケットボールのようなゴールを追加し中央の点を外してみましょう。（このページのトップ画像参照）
</p><p>
オリジナルの46行から53行を削除し、かわりに次のコードを挿入します。
</p><p>
<pre class="brush:js;">
            //ゴールの作成
                var goall = new PhyBoxSprite(100, 4, enchant.box2d.STATIC_SPRITE, 0, 1.0, 0, false);
                goall.backgroundColor = "#aaa";
                goall.position = {
                        x: 125,
                        y: 160
                }
                goall.angle = 75;
                game.rootScene.addChild(goall);
                var goalr = new PhyBoxSprite(100, 4, enchant.box2d.STATIC_SPRITE, 0, 1.0, 0, false);
                goalr.backgroundColor = "#aaa";
                goalr.position = {
                        x: 195,
                        y: 160
                }
                goalr.angle = -75;
                game.rootScene.addChild(goalr);
</pre>
</p><p>
壁や天井の作り方と同じです。goall.angle = 75;で傾き角度を設定しているところは注目しましょう。
</p><p>
画面に棒を二本追加しただけですが、これでずいぶん違ってきます。お試しください。
</p><p>
<a href="https://toyama-rt.github.io/web-toy/g-01b042/" target="_blank">WebToy2</a>
</p><p>
できる操作は相変わらずクリックだけですが、ゴールが追加されおもちゃとしての性格がずいぶん変わりました。ポンポンはねるのを眺めるだけだったのが目標（ゴール）ができました。理解のハードルがやや（もしくはかなり）上がっています。
</p><p>
床に落ちる前に次のクリックができるとゴールに入る可能性が上がるようです。ですのでたくさんのクリックが苦手なひとはここでも苦労するでしょう。これは一種の身体能力の『バリア』ですがこのおかげで面白くもなります。ゴールの寸法や位置や角度を変えると、バリアの大きさも面白さも変わります。簡単すぎて飽きちゃった場合も難しすぎて泣きそうな場合もこれで何とかできます。しかもかなり細かく微調整できます。
</p><p>
しかしあそんでいるうちにコツやノウハウを自分でみつけて、それを友達に教えてあげるなんてのもいいですね。だからおもちゃの世界にはおとなはあまり口出ししない方がいいのかもしれません。
</p><p>
あとはこの文をお読みのあなたのアイデアと簡単なプログラミング次第で可能性が広がります。
</p><p>
既製品のゲームはかなりむつかしいです。そして高価です。もともとそうでないと人気がでない世界の商品なのですから仕方がありません。とくに不自由のあるこどもさんの場合、難易度をうまく合わせてあげると、ながくとりくめるかもしれません。
</p>
<h2>３　うまくいかない場合には</h2>
<p>
飽きちゃう人もいる一方で、うまくいかない人もいるかもしれません。
</p><p>
スイッチを押して赤い正方形がポンポンはねているのに、ほかのおこさんとはちょっと様子が違う。なんとなくぼんやりして、動きに対する反応があまり見られない。もしかしたらその人は周囲の人とは違う見え方をしているのかもしれません。
</p><p>
モニターを顔の正面で見ているでしょうか。左右に傾いたり、上目や下目使いになっていないでしょうか。モニターに近すぎたり離れすぎたりしていませんか。また両目でしっかり見ているでしょうか。疲れやすくないですか。
</p><p>
おとなで脳卒中などの病気のあと、うまく見えなくなるひとがいます。視野が狭くなったり、視力が急に落ちたり、左右どちらか視力が落ちたりすることもあります。病気がきっかけで急に悪くなるのでご本人も周囲も気がつきます。しかし白内障のようにゆっくりすすむ病気では気がつかないことが多いです。またこどもさんのようによく見えた経験が少ないとこれもまた気がつかないことがおおくなります。またご家族にしても昔から変わらないとおっしゃるかもしれません。
</p><p>
またすばやい動きを見るのが苦手なこともあります。世界一流の卓球試合では猛烈なスピードでうちあいます。目がついていける観客は熱狂しますが、ついていけない観客は呆然とするばかりです。WebToy1もポンポコくるくる動きます。そこがおもしろいところなのですが、もし目がついていかないと卓球と同じでおもしろくありません。もしかしたらひどく疲れるかもしれません。見えると見えないのあいだには、がんばれば見えるというのがあります。がんばれば見えるということは、疲れると見えないということです。そのひとにとってはつらいできごとですから、手助け、場合によっては『合理的配慮』ともいいますが、これが必要になります。
</p><p>
さてそこで、月に行くことにしましょう。月の重力加速度は1.622m/s2で地球の約１／６です。ついでにクリックではねる力も１／６にしましょう。月に行くのは簡単ではありませんが月のように赤い正方形を動かすのは簡単です。具体的には、オリジナルの8行と66-82行を以下のように変更します。具体的には、重力加速度を、9.8から1.622に、はねる力を、50から8、-50から-8に変更しています。ところであなたの目は細かい文字が見えますか？
</p><p>
<pre class="brush:js;">
     //物理エンジンの宣言
           var world = new PhysicsWorld(0, 1.622);//月の重力加速度　下方向に1.622m/s2
</pre>
<pre class="brush:js;">
                game.rootScene.addEventListener(Event.TOUCH_START, function(e) {
          game.assets['./snd/jump.mp3'].clone().play(); //クリックすると音
 
                  if (count1 == 0){
                    Impx = 8;
                  } else if (count1 == 1){
                    Impx = -8;
                  } else {
                   Impx = 0;
                   count1 = -1;
                  }
                   Impy = -8; 
                 box.applyImpulse(new b2Vec2(Impx, Impy));
                 count1++;
 
                });
</pre>
</p><p>
こちらもお試しください。ときどきおられるのです。自分では試していないのにおこさんにはやらせるおとなの方が。これは反対ですね。こどもに隠れて（つまりないしょのふりをして）おとなが楽しそうに遊んでいるとこどもの興味関心はあふれ出してきます。この方法もお試しください。
</p><p>
<a href="https://toyama-rt.github.io/web-toy/g-01b043/" target="_blank">WebToy3</a>
</p><p>
速さ以外の外見はすべて同じです。なにも知らせずにこちらをためしたらなにか違いがわかるかもしれません。見え方が変わったからでしょうか？もしかしたらどちらも見えるけれど、ゆっくりのほうも好きになるかもしれません。なにしろおもちゃですから好き嫌いのことまではわかりません。
</p><p>
まあどちらにせよ、楽しく毎日遊んでくれれば、クリック操作やスイッチ操作が上手になると期待できます。まあこの際、ご本人が訓練しているなどと自覚する必要はありません。
</p>
<h2>４　おわりに</h2>
<p>
おもちゃには対応年齢というジャンルわけがあります。0歳児むけ、１，２才むけ、3-6才児むけ、小学校低学年、中学年、高学年、中学高校、おとな、おおむねこのくらいでしょうか。
</p><p>
しかし不自由を持つこどもたちの場合は、この階段はもっと細かく準備しなくてはいけません。いくらか難しくても何とかするゆとりの部分がやや少ないからです。池の飛び石を普通よりもたくさん細かく配置して、うまく渡れないひとのために通路を用意するのと同じ理屈です。
</p><p>
今回は、とび石をたくさん準備する方法について考えてみました。もっといろいろ試してみたい方のために今回はお土産を用意しました。
</p><p>
<a href="./g-01b041.zip" >WebToy1お試し版一式</a><br>
<a href="./g-01b042.zip" >WebToy2お試し版一式</a><br>
<a href="./g-01b043.zip" >WebToy3お試し版一式</a><br>
</p><p>
前回と今回ご紹介した3種類のWebToyのおためし版です。ダウンロードしたあと展開して（win10では、右クリック＞すべて展開）index.htmlをダブルクリックで動き始めます。（このような操作はパソコンでできます。タブレットやスマホではできません）main.jsをメモ帳などで書き換えて保存すれば、動きが変更できます。どうぞお試しください。ちなみに火星の重力加速度は、3.711m/s2です。
</p><p>
さてさて話は変わります。プログラミングの話をすると、よくこんな言葉を耳にします。
</p><p>
「私はプロではない」
</p><p>
それはわかります。ではその仕事を誰かプロに任せたギャラは誰が払うのでしょうか？プロはただで仕事をしません。だからプロなんです。プロに仕事を任せるにはお金が必要なのです。ではお金のない人はどうすればいいのですか？あきらめますか？泣き寝入りしますか？
</p><p>
私の職場から国際協力機構の仕事に参加する人もいます。関係する本など読むと、飲み水に困っているひとを助けるときには、井戸の掘り方を学んでもらうそうです。この場合、水さえ出てきて自立できればプロである必要はないのです。その都度援助しているといつまでも自立できないこともよくあるそうです。
</p><p>
また手料理、日曜大工、家庭菜園、草野球などアマチュアでも必要とする人のためには役に立てます。シェフでも、建築家でも、農業経営者でも、プロ野球選手でもいいですがそうである必要はありません。
</p><p>
そもそも、『いまはできない』ひとから『できる』を見つけようとしているのですから、共に進むひとびともいたほうがいいと思いますが、いかがでしょうか。
</p><p>
さて、次回はさらに手直しを加え発展させていく予定です。どうぞお楽しみに。
</p>
<h2>関連する記事</h2>
<ul>
  <li><a target="_blank" href="../enchant/yokumienai.html">エンチャント文字盤を利用した　よく見えない　そんな場合の対応</a></li>
  <li><a target="_blank" href="../mojiban/mojiban_jirei2.html">しゃべる文字盤　当院での事例紹介</a></li>
</ul>



<h2>参考URL</h2>
<ul>
  <li>AT2ED : エイティースクウェアード　福祉機器情報　コンピュータ操作を補助する装置にもっと情報があります。本文で紹介した代替マウスの情報もあります。<br>
<a target="_blank" href="http://at2ed.jp/">http://at2ed.jp/</a></li>
  <li>物理演算エンジン - Wikipedia<br>
<a target="_blank" href="https://ja.wikipedia.org/wiki/物理演算エンジン">https://ja.wikipedia.org/wiki/物理演算エンジン</a></li>
  <li>Box2D<br>
<a target="_blank" href="https://box2d.org/">https://box2d.org/</a></li>
</ul>

<hr style="width: 60%; height: 5%; color: black;">
<p><span class="samples">2020/06/26　公開</span></p>

<a href="../index.html" target="_self">
<p align="center">研究企画課リハ工学科にもどる</a>　←もくじはこちらです</p>

</body></html>
